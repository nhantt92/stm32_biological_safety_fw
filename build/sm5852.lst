ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"sm5852.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.global	__aeabi_i2d
  16              		.global	__aeabi_dcmplt
  17              		.global	__aeabi_ui2f
  18              		.global	__aeabi_f2d
  19              		.global	__aeabi_dsub
  20              		.global	__aeabi_ddiv
  21              		.global	__aeabi_d2f
  22              		.section	.text.toPressure,"ax",%progbits
  23              		.align	1
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  27              		.fpu softvfp
  29              	toPressure:
  30              	.LFB69:
  31              		.file 1 "Src/sm5852.c"
   1:Src/sm5852.c  **** #include "sm5852.h"
   2:Src/sm5852.c  **** #include "i2c.h"
   3:Src/sm5852.c  **** #include <string.h>
   4:Src/sm5852.c  **** #include "kalman_filter.h"
   5:Src/sm5852.c  **** #include <stdio.h>
   6:Src/sm5852.c  **** #include <stdlib.h>
   7:Src/sm5852.c  **** 
   8:Src/sm5852.c  **** static float toPressure(uint8_t hi, uint8_t lo);
   9:Src/sm5852.c  **** static float toTemp(uint8_t hi, uint8_t lo);
  10:Src/sm5852.c  **** 
  11:Src/sm5852.c  **** void SM5852_Init(SM5852_T *sm5852)
  12:Src/sm5852.c  **** {
  13:Src/sm5852.c  **** 	if(sm5852->i2cHandle.Instance == I2C1)
  14:Src/sm5852.c  **** 	{
  15:Src/sm5852.c  **** 		//printf("I2C1\n");
  16:Src/sm5852.c  **** 		MX_I2C1_Init();
  17:Src/sm5852.c  **** 		HAL_I2C_Master_Transmit(&hi2c1, SM5852_ADDR << 1, 0x00, 1, 100);
  18:Src/sm5852.c  **** 	}
  19:Src/sm5852.c  **** 	else if(sm5852->i2cHandle.Instance == I2C2)
  20:Src/sm5852.c  **** 	{
  21:Src/sm5852.c  **** 		//printf("I2C2\n");
  22:Src/sm5852.c  **** 		MX_I2C2_Init();
  23:Src/sm5852.c  **** 		HAL_I2C_Master_Transmit(&hi2c2, SM5852_ADDR << 1, 0x00, 1, 100);	
  24:Src/sm5852.c  **** 	}
  25:Src/sm5852.c  **** 	//sm5852->state = 0;  //only use when use average filter 
  26:Src/sm5852.c  **** 	memset(sm5852->buff, 0x00, sizeof(sm5852->buff));
  27:Src/sm5852.c  **** 	sm5852->pressure = 0;
ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 2


  28:Src/sm5852.c  **** 	sm5852->temp = 0;
  29:Src/sm5852.c  **** 	Simple_Kalman_Filter(1, 1, 0.01);
  30:Src/sm5852.c  **** 	sm5852->tick = HAL_GetTick();
  31:Src/sm5852.c  **** }
  32:Src/sm5852.c  **** 
  33:Src/sm5852.c  **** void SM5852_GetData(SM5852_T *sm5852)
  34:Src/sm5852.c  **** {
  35:Src/sm5852.c  **** 	if(sm5852->i2cHandle.Instance == I2C1)
  36:Src/sm5852.c  **** 	{
  37:Src/sm5852.c  **** 		//printf("Read Sensor I2C1\n");
  38:Src/sm5852.c  **** 		HAL_I2C_Master_Transmit(&hi2c1, 0x5F << 1, 0x00, 1, 100);
  39:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c1, SM5852_ADDR << 1, CORRECTED_PRESSURE_LSB, 1, sm5852->buff, 1, 1000);
  40:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c1, SM5852_ADDR << 1, CORRECTED_PRESSURE_MSB, 1, sm5852->buff + 1, 1, 1000);
  41:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c1, SM5852_ADDR << 1, TEMPERATURE_LSB, 1, sm5852->buff + 2, 1, 1000);
  42:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c1, SM5852_ADDR << 1, TEMPERATURE_MSB, 1, sm5852->buff + 3, 1, 1000);
  43:Src/sm5852.c  **** 	}
  44:Src/sm5852.c  **** 	else if(sm5852->i2cHandle.Instance == I2C2)
  45:Src/sm5852.c  **** 	{
  46:Src/sm5852.c  **** 		//printf("Read Sensor I2C2\n");
  47:Src/sm5852.c  **** 		HAL_I2C_Master_Transmit(&hi2c1, 0x5F << 1, 0x00, 1, 100);
  48:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c2, SM5852_ADDR << 1, CORRECTED_PRESSURE_LSB, 1, sm5852->buff, 1, 1000);
  49:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c2, SM5852_ADDR << 1, CORRECTED_PRESSURE_MSB, 1, sm5852->buff + 1, 1, 1000);
  50:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c2, SM5852_ADDR << 1, TEMPERATURE_LSB, 1, sm5852->buff + 2, 1, 1000);
  51:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c2, SM5852_ADDR << 1, TEMPERATURE_MSB, 1, sm5852->buff + 3, 1, 1000);
  52:Src/sm5852.c  **** 	}
  53:Src/sm5852.c  **** }
  54:Src/sm5852.c  **** 
  55:Src/sm5852.c  **** void SM5852_Manager(SM5852_T *sm5852)
  56:Src/sm5852.c  **** {
  57:Src/sm5852.c  **** 	float pressure, temp, psi;
  58:Src/sm5852.c  **** 	if(HAL_GetTick() - sm5852->tick > 200)
  59:Src/sm5852.c  **** 	{
  60:Src/sm5852.c  **** 		uint32_t time = HAL_GetTick();
  61:Src/sm5852.c  **** 		/* Get Data to buff */
  62:Src/sm5852.c  **** 		SM5852_GetData(sm5852);
  63:Src/sm5852.c  **** 
  64:Src/sm5852.c  **** 		/* Debug read SM5852 Sensor */
  65:Src/sm5852.c  **** 		//printf("%d, %d, %d ,%d\n", sm5852->buff[0], sm5852->buff[1], sm5852->buff[2], sm5852->buff[3]);
  66:Src/sm5852.c  **** 		//printf("ValueP: %d , temp: %d \n", (sm5852->buff[1] << 6 | sm5852->buff[0]) , sm5852->buff[3] <
  67:Src/sm5852.c  **** 		//printf("Pressure (psi): %.5f psi\n", (toPressure(sm5852->buff[1], sm5852->buff[0])));
  68:Src/sm5852.c  **** 		//printf("Pressure (Pa) : %.0f Pa\n", ((toPressure(sm5852->buff[1], sm5852->buff[0]) * 1034.21)/0
  69:Src/sm5852.c  **** 		/* *------*		*------*	*------* */
  70:Src/sm5852.c  **** 
  71:Src/sm5852.c  **** 		/* Convert Raw Value to Pressure, Temperature */
  72:Src/sm5852.c  **** 		psi = toPressure(sm5852->buff[1], sm5852->buff[0]); // psi
  73:Src/sm5852.c  **** 		//printf("psi: %.2f\n", psi);
  74:Src/sm5852.c  **** 		//psi = Update_Estimate(psi);
  75:Src/sm5852.c  **** 		//printf("psi Kalman: %.2f\n", psi);
  76:Src/sm5852.c  **** 		sm5852->pressure = (psi * 1034.21)/P_MAX; 					// Convert psi to Pa
  77:Src/sm5852.c  **** 		//printf("Pressure: %.2f\n", sm5852->pressure);
  78:Src/sm5852.c  **** 		temp = toTemp(sm5852->buff[3], sm5852->buff[2]);
  79:Src/sm5852.c  **** 		temp = Update_Estimate(temp);
  80:Src/sm5852.c  **** 		sm5852->temp = Update_Estimate(temp);
  81:Src/sm5852.c  **** 		//printf("Temp: %.2f\n", sm5852->temp);
  82:Src/sm5852.c  **** 		sm5852->tick = HAL_GetTick();
  83:Src/sm5852.c  **** 	}
  84:Src/sm5852.c  **** }
ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 3


  85:Src/sm5852.c  **** 
  86:Src/sm5852.c  **** static float toPressure(uint8_t hi, uint8_t lo)
  87:Src/sm5852.c  **** {
  32              		.loc 1 87 0
  33              		.cfi_startproc
  34              		@ args = 0, pretend = 0, frame = 0
  35              		@ frame_needed = 0, uses_anonymous_args = 0
  36              	.LVL0:
  37 0000 10B5     		push	{r4, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 8
  40              		.cfi_offset 4, -8
  41              		.cfi_offset 14, -4
  88:Src/sm5852.c  ****   uint16_t pressureCnt = (hi << 6) | lo;
  42              		.loc 1 88 0
  43 0002 41EA8014 		orr	r4, r1, r0, lsl #6
  44              	.LVL1:
  89:Src/sm5852.c  ****   /* Process differential pressure only positive values */
  90:Src/sm5852.c  ****   if(pressureCnt < DigoutPmin) 
  45              		.loc 1 90 0
  46 0006 2046     		mov	r0, r4
  47              	.LVL2:
  48 0008 FFF7FEFF 		bl	__aeabi_i2d
  49              	.LVL3:
  50 000c 0EA3     		adr	r3, .L7
  51 000e D3E90023 		ldrd	r2, [r3]
  52 0012 FFF7FEFF 		bl	__aeabi_dcmplt
  53              	.LVL4:
  54 0016 88B9     		cbnz	r0, .L6
  55              	.LVL5:
  56              	.L2:
  91:Src/sm5852.c  ****   	pressureCnt = DigoutPmin;
  92:Src/sm5852.c  ****   else
  93:Src/sm5852.c  ****   	pressureCnt = pressureCnt;
  94:Src/sm5852.c  ****   /* *------*	*------* 	*------* */
  95:Src/sm5852.c  ****   float pressure = (((float)pressureCnt - DigoutPmin)/((DigoutPmax - DigoutPmin)/0.15));
  57              		.loc 1 95 0
  58 0018 2046     		mov	r0, r4
  59 001a FFF7FEFF 		bl	__aeabi_ui2f
  60              	.LVL6:
  61 001e FFF7FEFF 		bl	__aeabi_f2d
  62              	.LVL7:
  63 0022 09A3     		adr	r3, .L7
  64 0024 D3E90023 		ldrd	r2, [r3]
  65 0028 FFF7FEFF 		bl	__aeabi_dsub
  66              	.LVL8:
  67 002c 08A3     		adr	r3, .L7+8
  68 002e D3E90023 		ldrd	r2, [r3]
  69 0032 FFF7FEFF 		bl	__aeabi_ddiv
  70              	.LVL9:
  71 0036 FFF7FEFF 		bl	__aeabi_d2f
  72              	.LVL10:
  96:Src/sm5852.c  ****   return pressure;
  97:Src/sm5852.c  **** }
  73              		.loc 1 97 0
  74 003a 10BD     		pop	{r4, pc}
  75              	.LVL11:
ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 4


  76              	.L6:
  91:Src/sm5852.c  ****   	pressureCnt = DigoutPmin;
  77              		.loc 1 91 0
  78 003c 40F2FD74 		movw	r4, #2045
  79              	.LVL12:
  80 0040 EAE7     		b	.L2
  81              	.L8:
  82 0042 00BFAFF3 		.align	3
  82      0080
  83              	.L7:
  84 0048 00000000 		.word	0
  85 004c 00F49F40 		.word	1084224512
  86 0050 00000000 		.word	0
  87 0054 005EC540 		.word	1086676480
  88              		.cfi_endproc
  89              	.LFE69:
  91              		.section	.text.toTemp,"ax",%progbits
  92              		.align	1
  93              		.syntax unified
  94              		.thumb
  95              		.thumb_func
  96              		.fpu softvfp
  98              	toTemp:
  99              	.LFB70:
  98:Src/sm5852.c  **** 
  99:Src/sm5852.c  **** static float toTemp(uint8_t hi, uint8_t lo)
 100:Src/sm5852.c  **** {
 100              		.loc 1 100 0
 101              		.cfi_startproc
 102              		@ args = 0, pretend = 0, frame = 0
 103              		@ frame_needed = 0, uses_anonymous_args = 0
 104              	.LVL13:
 105 0000 08B5     		push	{r3, lr}
 106              	.LCFI1:
 107              		.cfi_def_cfa_offset 8
 108              		.cfi_offset 3, -8
 109              		.cfi_offset 14, -4
 110              	.LVL14:
 101:Src/sm5852.c  ****   uint16_t tempCnt = hi << 6 | lo;
 102:Src/sm5852.c  ****   float temp = (((float)tempCnt - DigoutTmin)/((DigoutTmax - DigoutTmin)/(150 + 40)) - 40);
 111              		.loc 1 102 0
 112 0002 41EA8010 		orr	r0, r1, r0, lsl #6
 113              	.LVL15:
 114 0006 FFF7FEFF 		bl	__aeabi_ui2f
 115              	.LVL16:
 116 000a FFF7FEFF 		bl	__aeabi_f2d
 117              	.LVL17:
 118 000e 08A3     		adr	r3, .L11
 119 0010 D3E90023 		ldrd	r2, [r3]
 120 0014 FFF7FEFF 		bl	__aeabi_dsub
 121              	.LVL18:
 122 0018 07A3     		adr	r3, .L11+8
 123 001a D3E90023 		ldrd	r2, [r3]
 124 001e FFF7FEFF 		bl	__aeabi_ddiv
 125              	.LVL19:
 126 0022 0022     		movs	r2, #0
 127 0024 064B     		ldr	r3, .L11+16
ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 5


 128 0026 FFF7FEFF 		bl	__aeabi_dsub
 129              	.LVL20:
 130 002a FFF7FEFF 		bl	__aeabi_d2f
 131              	.LVL21:
 103:Src/sm5852.c  ****   return temp;
 104:Src/sm5852.c  **** }...
 132              		.loc 1 104 0
 133 002e 08BD     		pop	{r3, pc}
 134              	.L12:
 135              		.align	3
 136              	.L11:
 137 0030 00000000 		.word	0
 138 0034 00F49F40 		.word	1084224512
 139 0038 61A41D2B 		.word	723362913
 140 003c 10462140 		.word	1075922448
 141 0040 00004440 		.word	1078198272
 142              		.cfi_endproc
 143              	.LFE70:
 145              		.section	.text.SM5852_Init,"ax",%progbits
 146              		.align	1
 147              		.global	SM5852_Init
 148              		.syntax unified
 149              		.thumb
 150              		.thumb_func
 151              		.fpu softvfp
 153              	SM5852_Init:
 154              	.LFB66:
  12:Src/sm5852.c  **** {
 155              		.loc 1 12 0
 156              		.cfi_startproc
 157              		@ args = 0, pretend = 0, frame = 0
 158              		@ frame_needed = 0, uses_anonymous_args = 0
 159              	.LVL22:
 160 0000 10B5     		push	{r4, lr}
 161              	.LCFI2:
 162              		.cfi_def_cfa_offset 8
 163              		.cfi_offset 4, -8
 164              		.cfi_offset 14, -4
 165 0002 82B0     		sub	sp, sp, #8
 166              	.LCFI3:
 167              		.cfi_def_cfa_offset 16
 168 0004 0446     		mov	r4, r0
  13:Src/sm5852.c  **** 	if(sm5852->i2cHandle.Instance == I2C1)
 169              		.loc 1 13 0
 170 0006 0369     		ldr	r3, [r0, #16]
 171 0008 154A     		ldr	r2, .L19
 172 000a 9342     		cmp	r3, r2
 173 000c 12D0     		beq	.L17
  19:Src/sm5852.c  **** 	else if(sm5852->i2cHandle.Instance == I2C2)
 174              		.loc 1 19 0
 175 000e 154A     		ldr	r2, .L19+4
 176 0010 9342     		cmp	r3, r2
 177 0012 1AD0     		beq	.L18
 178              	.LVL23:
 179              	.L15:
  26:Src/sm5852.c  **** 	memset(sm5852->buff, 0x00, sizeof(sm5852->buff));
 180              		.loc 1 26 0
ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 6


 181 0014 0023     		movs	r3, #0
 182 0016 2360     		str	r3, [r4]	@ unaligned
  27:Src/sm5852.c  **** 	sm5852->pressure = 0;
 183              		.loc 1 27 0
 184 0018 0023     		movs	r3, #0
 185 001a A360     		str	r3, [r4, #8]	@ float
  28:Src/sm5852.c  **** 	sm5852->temp = 0;
 186              		.loc 1 28 0
 187 001c E360     		str	r3, [r4, #12]	@ float
  29:Src/sm5852.c  **** 	Simple_Kalman_Filter(1, 1, 0.01);
 188              		.loc 1 29 0
 189 001e 4FF07E50 		mov	r0, #1065353216
 190 0022 114A     		ldr	r2, .L19+8
 191 0024 0146     		mov	r1, r0
 192 0026 FFF7FEFF 		bl	Simple_Kalman_Filter
 193              	.LVL24:
  30:Src/sm5852.c  **** 	sm5852->tick = HAL_GetTick();
 194              		.loc 1 30 0
 195 002a FFF7FEFF 		bl	HAL_GetTick
 196              	.LVL25:
 197 002e 6060     		str	r0, [r4, #4]
  31:Src/sm5852.c  **** }
 198              		.loc 1 31 0
 199 0030 02B0     		add	sp, sp, #8
 200              	.LCFI4:
 201              		.cfi_remember_state
 202              		.cfi_def_cfa_offset 8
 203              		@ sp needed
 204 0032 10BD     		pop	{r4, pc}
 205              	.LVL26:
 206              	.L17:
 207              	.LCFI5:
 208              		.cfi_restore_state
  16:Src/sm5852.c  **** 		MX_I2C1_Init();
 209              		.loc 1 16 0
 210 0034 FFF7FEFF 		bl	MX_I2C1_Init
 211              	.LVL27:
  17:Src/sm5852.c  **** 		HAL_I2C_Master_Transmit(&hi2c1, SM5852_ADDR << 1, 0x00, 1, 100);
 212              		.loc 1 17 0
 213 0038 6423     		movs	r3, #100
 214 003a 0093     		str	r3, [sp]
 215 003c 0123     		movs	r3, #1
 216 003e 0022     		movs	r2, #0
 217 0040 BE21     		movs	r1, #190
 218 0042 0A48     		ldr	r0, .L19+12
 219 0044 FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 220              	.LVL28:
 221 0048 E4E7     		b	.L15
 222              	.LVL29:
 223              	.L18:
  22:Src/sm5852.c  **** 		MX_I2C2_Init();
 224              		.loc 1 22 0
 225 004a FFF7FEFF 		bl	MX_I2C2_Init
 226              	.LVL30:
  23:Src/sm5852.c  **** 		HAL_I2C_Master_Transmit(&hi2c2, SM5852_ADDR << 1, 0x00, 1, 100);	
 227              		.loc 1 23 0
 228 004e 6423     		movs	r3, #100
ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 7


 229 0050 0093     		str	r3, [sp]
 230 0052 0123     		movs	r3, #1
 231 0054 0022     		movs	r2, #0
 232 0056 BE21     		movs	r1, #190
 233 0058 0548     		ldr	r0, .L19+16
 234 005a FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 235              	.LVL31:
 236 005e D9E7     		b	.L15
 237              	.L20:
 238              		.align	2
 239              	.L19:
 240 0060 00540040 		.word	1073763328
 241 0064 00580040 		.word	1073764352
 242 0068 0AD7233C 		.word	1008981770
 243 006c 00000000 		.word	hi2c1
 244 0070 00000000 		.word	hi2c2
 245              		.cfi_endproc
 246              	.LFE66:
 248              		.section	.text.SM5852_GetData,"ax",%progbits
 249              		.align	1
 250              		.global	SM5852_GetData
 251              		.syntax unified
 252              		.thumb
 253              		.thumb_func
 254              		.fpu softvfp
 256              	SM5852_GetData:
 257              	.LFB67:
  34:Src/sm5852.c  **** {
 258              		.loc 1 34 0
 259              		.cfi_startproc
 260              		@ args = 0, pretend = 0, frame = 0
 261              		@ frame_needed = 0, uses_anonymous_args = 0
 262              	.LVL32:
 263 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 264              	.LCFI6:
 265              		.cfi_def_cfa_offset 20
 266              		.cfi_offset 4, -20
 267              		.cfi_offset 5, -16
 268              		.cfi_offset 6, -12
 269              		.cfi_offset 7, -8
 270              		.cfi_offset 14, -4
 271 0002 85B0     		sub	sp, sp, #20
 272              	.LCFI7:
 273              		.cfi_def_cfa_offset 40
 274 0004 0446     		mov	r4, r0
  35:Src/sm5852.c  **** 	if(sm5852->i2cHandle.Instance == I2C1)
 275              		.loc 1 35 0
 276 0006 0369     		ldr	r3, [r0, #16]
 277 0008 374A     		ldr	r2, .L27
 278 000a 9342     		cmp	r3, r2
 279 000c 04D0     		beq	.L25
  44:Src/sm5852.c  **** 	else if(sm5852->i2cHandle.Instance == I2C2)
 280              		.loc 1 44 0
 281 000e 374A     		ldr	r2, .L27+4
 282 0010 9342     		cmp	r3, r2
 283 0012 35D0     		beq	.L26
 284              	.LVL33:
ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 8


 285              	.L21:
  53:Src/sm5852.c  **** }
 286              		.loc 1 53 0
 287 0014 05B0     		add	sp, sp, #20
 288              	.LCFI8:
 289              		.cfi_remember_state
 290              		.cfi_def_cfa_offset 20
 291              		@ sp needed
 292 0016 F0BD     		pop	{r4, r5, r6, r7, pc}
 293              	.LVL34:
 294              	.L25:
 295              	.LCFI9:
 296              		.cfi_restore_state
  38:Src/sm5852.c  **** 		HAL_I2C_Master_Transmit(&hi2c1, 0x5F << 1, 0x00, 1, 100);
 297              		.loc 1 38 0
 298 0018 354E     		ldr	r6, .L27+8
 299 001a 6423     		movs	r3, #100
 300 001c 0093     		str	r3, [sp]
 301 001e 0123     		movs	r3, #1
 302 0020 0022     		movs	r2, #0
 303 0022 BE21     		movs	r1, #190
 304 0024 3046     		mov	r0, r6
 305              	.LVL35:
 306 0026 FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 307              	.LVL36:
  39:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c1, SM5852_ADDR << 1, CORRECTED_PRESSURE_LSB, 1, sm5852->buff, 1, 1000);
 308              		.loc 1 39 0
 309 002a 4FF47A77 		mov	r7, #1000
 310 002e 0297     		str	r7, [sp, #8]
 311 0030 0125     		movs	r5, #1
 312 0032 0195     		str	r5, [sp, #4]
 313 0034 0094     		str	r4, [sp]
 314 0036 2B46     		mov	r3, r5
 315 0038 8022     		movs	r2, #128
 316 003a BE21     		movs	r1, #190
 317 003c 3046     		mov	r0, r6
 318 003e FFF7FEFF 		bl	HAL_I2C_Mem_Read
 319              	.LVL37:
  40:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c1, SM5852_ADDR << 1, CORRECTED_PRESSURE_MSB, 1, sm5852->buff + 1, 1, 1000);
 320              		.loc 1 40 0
 321 0042 0297     		str	r7, [sp, #8]
 322 0044 0195     		str	r5, [sp, #4]
 323 0046 6319     		adds	r3, r4, r5
 324 0048 0093     		str	r3, [sp]
 325 004a 2B46     		mov	r3, r5
 326 004c 8122     		movs	r2, #129
 327 004e BE21     		movs	r1, #190
 328 0050 3046     		mov	r0, r6
 329 0052 FFF7FEFF 		bl	HAL_I2C_Mem_Read
 330              	.LVL38:
  41:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c1, SM5852_ADDR << 1, TEMPERATURE_LSB, 1, sm5852->buff + 2, 1, 1000);
 331              		.loc 1 41 0
 332 0056 0297     		str	r7, [sp, #8]
 333 0058 0195     		str	r5, [sp, #4]
 334 005a A31C     		adds	r3, r4, #2
 335 005c 0093     		str	r3, [sp]
 336 005e 2B46     		mov	r3, r5
ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 9


 337 0060 8222     		movs	r2, #130
 338 0062 BE21     		movs	r1, #190
 339 0064 3046     		mov	r0, r6
 340 0066 FFF7FEFF 		bl	HAL_I2C_Mem_Read
 341              	.LVL39:
  42:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c1, SM5852_ADDR << 1, TEMPERATURE_MSB, 1, sm5852->buff + 3, 1, 1000);
 342              		.loc 1 42 0
 343 006a 0297     		str	r7, [sp, #8]
 344 006c 0195     		str	r5, [sp, #4]
 345 006e 0334     		adds	r4, r4, #3
 346              	.LVL40:
 347 0070 0094     		str	r4, [sp]
 348 0072 2B46     		mov	r3, r5
 349 0074 8322     		movs	r2, #131
 350 0076 BE21     		movs	r1, #190
 351 0078 3046     		mov	r0, r6
 352 007a FFF7FEFF 		bl	HAL_I2C_Mem_Read
 353              	.LVL41:
 354 007e C9E7     		b	.L21
 355              	.LVL42:
 356              	.L26:
  47:Src/sm5852.c  **** 		HAL_I2C_Master_Transmit(&hi2c1, 0x5F << 1, 0x00, 1, 100);
 357              		.loc 1 47 0
 358 0080 6423     		movs	r3, #100
 359 0082 0093     		str	r3, [sp]
 360 0084 0123     		movs	r3, #1
 361 0086 0022     		movs	r2, #0
 362 0088 BE21     		movs	r1, #190
 363 008a 1948     		ldr	r0, .L27+8
 364              	.LVL43:
 365 008c FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 366              	.LVL44:
  48:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c2, SM5852_ADDR << 1, CORRECTED_PRESSURE_LSB, 1, sm5852->buff, 1, 1000);
 367              		.loc 1 48 0
 368 0090 184E     		ldr	r6, .L27+12
 369 0092 4FF47A77 		mov	r7, #1000
 370 0096 0297     		str	r7, [sp, #8]
 371 0098 0125     		movs	r5, #1
 372 009a 0195     		str	r5, [sp, #4]
 373 009c 0094     		str	r4, [sp]
 374 009e 2B46     		mov	r3, r5
 375 00a0 8022     		movs	r2, #128
 376 00a2 BE21     		movs	r1, #190
 377 00a4 3046     		mov	r0, r6
 378 00a6 FFF7FEFF 		bl	HAL_I2C_Mem_Read
 379              	.LVL45:
  49:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c2, SM5852_ADDR << 1, CORRECTED_PRESSURE_MSB, 1, sm5852->buff + 1, 1, 1000);
 380              		.loc 1 49 0
 381 00aa 0297     		str	r7, [sp, #8]
 382 00ac 0195     		str	r5, [sp, #4]
 383 00ae 6319     		adds	r3, r4, r5
 384 00b0 0093     		str	r3, [sp]
 385 00b2 2B46     		mov	r3, r5
 386 00b4 8122     		movs	r2, #129
 387 00b6 BE21     		movs	r1, #190
 388 00b8 3046     		mov	r0, r6
 389 00ba FFF7FEFF 		bl	HAL_I2C_Mem_Read
ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 10


 390              	.LVL46:
  50:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c2, SM5852_ADDR << 1, TEMPERATURE_LSB, 1, sm5852->buff + 2, 1, 1000);
 391              		.loc 1 50 0
 392 00be 0297     		str	r7, [sp, #8]
 393 00c0 0195     		str	r5, [sp, #4]
 394 00c2 A31C     		adds	r3, r4, #2
 395 00c4 0093     		str	r3, [sp]
 396 00c6 2B46     		mov	r3, r5
 397 00c8 8222     		movs	r2, #130
 398 00ca BE21     		movs	r1, #190
 399 00cc 3046     		mov	r0, r6
 400 00ce FFF7FEFF 		bl	HAL_I2C_Mem_Read
 401              	.LVL47:
  51:Src/sm5852.c  **** 		HAL_I2C_Mem_Read(&hi2c2, SM5852_ADDR << 1, TEMPERATURE_MSB, 1, sm5852->buff + 3, 1, 1000);
 402              		.loc 1 51 0
 403 00d2 0297     		str	r7, [sp, #8]
 404 00d4 0195     		str	r5, [sp, #4]
 405 00d6 0334     		adds	r4, r4, #3
 406              	.LVL48:
 407 00d8 0094     		str	r4, [sp]
 408 00da 2B46     		mov	r3, r5
 409 00dc 8322     		movs	r2, #131
 410 00de BE21     		movs	r1, #190
 411 00e0 3046     		mov	r0, r6
 412 00e2 FFF7FEFF 		bl	HAL_I2C_Mem_Read
 413              	.LVL49:
  53:Src/sm5852.c  **** }
 414              		.loc 1 53 0
 415 00e6 95E7     		b	.L21
 416              	.L28:
 417              		.align	2
 418              	.L27:
 419 00e8 00540040 		.word	1073763328
 420 00ec 00580040 		.word	1073764352
 421 00f0 00000000 		.word	hi2c1
 422 00f4 00000000 		.word	hi2c2
 423              		.cfi_endproc
 424              	.LFE67:
 426              		.global	__aeabi_dmul
 427              		.section	.text.SM5852_Manager,"ax",%progbits
 428              		.align	1
 429              		.global	SM5852_Manager
 430              		.syntax unified
 431              		.thumb
 432              		.thumb_func
 433              		.fpu softvfp
 435              	SM5852_Manager:
 436              	.LFB68:
  56:Src/sm5852.c  **** {
 437              		.loc 1 56 0
 438              		.cfi_startproc
 439              		@ args = 0, pretend = 0, frame = 0
 440              		@ frame_needed = 0, uses_anonymous_args = 0
 441              	.LVL50:
 442 0000 10B5     		push	{r4, lr}
 443              	.LCFI10:
 444              		.cfi_def_cfa_offset 8
ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 11


 445              		.cfi_offset 4, -8
 446              		.cfi_offset 14, -4
 447 0002 0446     		mov	r4, r0
  58:Src/sm5852.c  **** 	if(HAL_GetTick() - sm5852->tick > 200)
 448              		.loc 1 58 0
 449 0004 FFF7FEFF 		bl	HAL_GetTick
 450              	.LVL51:
 451 0008 6368     		ldr	r3, [r4, #4]
 452 000a C01A     		subs	r0, r0, r3
 453 000c C828     		cmp	r0, #200
 454 000e 00D8     		bhi	.L32
 455              	.L29:
  84:Src/sm5852.c  **** }
 456              		.loc 1 84 0
 457 0010 10BD     		pop	{r4, pc}
 458              	.LVL52:
 459              	.L32:
 460              	.LBB2:
  60:Src/sm5852.c  **** 		uint32_t time = HAL_GetTick();
 461              		.loc 1 60 0
 462 0012 FFF7FEFF 		bl	HAL_GetTick
 463              	.LVL53:
  62:Src/sm5852.c  **** 		SM5852_GetData(sm5852);
 464              		.loc 1 62 0
 465 0016 2046     		mov	r0, r4
 466 0018 FFF7FEFF 		bl	SM5852_GetData
 467              	.LVL54:
  72:Src/sm5852.c  **** 		psi = toPressure(sm5852->buff[1], sm5852->buff[0]); // psi
 468              		.loc 1 72 0
 469 001c 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 470 001e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 471 0020 FFF7FEFF 		bl	toPressure
 472              	.LVL55:
  76:Src/sm5852.c  **** 		sm5852->pressure = (psi * 1034.21)/P_MAX; 					// Convert psi to Pa
 473              		.loc 1 76 0
 474 0024 FFF7FEFF 		bl	__aeabi_f2d
 475              	.LVL56:
 476 0028 0DA3     		adr	r3, .L33
 477 002a D3E90023 		ldrd	r2, [r3]
 478 002e FFF7FEFF 		bl	__aeabi_dmul
 479              	.LVL57:
 480 0032 0DA3     		adr	r3, .L33+8
 481 0034 D3E90023 		ldrd	r2, [r3]
 482 0038 FFF7FEFF 		bl	__aeabi_ddiv
 483              	.LVL58:
 484 003c FFF7FEFF 		bl	__aeabi_d2f
 485              	.LVL59:
 486 0040 A060     		str	r0, [r4, #8]	@ float
  78:Src/sm5852.c  **** 		temp = toTemp(sm5852->buff[3], sm5852->buff[2]);
 487              		.loc 1 78 0
 488 0042 A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 489 0044 E078     		ldrb	r0, [r4, #3]	@ zero_extendqisi2
 490 0046 FFF7FEFF 		bl	toTemp
 491              	.LVL60:
  79:Src/sm5852.c  **** 		temp = Update_Estimate(temp);
 492              		.loc 1 79 0
 493 004a FFF7FEFF 		bl	Update_Estimate
ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 12


 494              	.LVL61:
  80:Src/sm5852.c  **** 		sm5852->temp = Update_Estimate(temp);
 495              		.loc 1 80 0
 496 004e FFF7FEFF 		bl	Update_Estimate
 497              	.LVL62:
 498 0052 E060     		str	r0, [r4, #12]	@ float
  82:Src/sm5852.c  **** 		sm5852->tick = HAL_GetTick();
 499              		.loc 1 82 0
 500 0054 FFF7FEFF 		bl	HAL_GetTick
 501              	.LVL63:
 502 0058 6060     		str	r0, [r4, #4]
 503              	.LBE2:
  84:Src/sm5852.c  **** }
 504              		.loc 1 84 0
 505 005a D9E7     		b	.L29
 506              	.L34:
 507 005c AFF30080 		.align	3
 508              	.L33:
 509 0060 A4703D0A 		.word	171798692
 510 0064 D7289040 		.word	1083189463
 511 0068 00000040 		.word	1073741824
 512 006c 3333C33F 		.word	1069757235
 513              		.cfi_endproc
 514              	.LFE68:
 516              		.text
 517              	.Letext0:
 518              		.file 2 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/machine/_defau
 519              		.file 3 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/_stdint.h"
 520              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 521              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 522              		.file 6 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xe.h"
 523              		.file 7 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/lock.h"
 524              		.file 8 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/_types.h"
 525              		.file 9 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/lib/gcc/arm-none-eabi/7.2.1/include/
 526              		.file 10 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/reent.h"
 527              		.file 11 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 528              		.file 12 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 529              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_i2c.h"
 530              		.file 14 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 531              		.file 15 "u8g2/csrc/u8x8.h"
 532              		.file 16 "u8g2/csrc/u8g2.h"
 533              		.file 17 "Inc/main.h"
 534              		.file 18 "Inc/sm5852.h"
 535              		.file 19 "Inc/i2c.h"
 536              		.file 20 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/math.h"
 537              		.file 21 "Inc/kalman_filter.h"
 538              		.file 22 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/stdlib.h"
ARM GAS  /var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s 			page 13


DEFINED SYMBOLS
                            *ABS*:0000000000000000 sm5852.c
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:23     .text.toPressure:0000000000000000 $t
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:29     .text.toPressure:0000000000000000 toPressure
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:84     .text.toPressure:0000000000000048 $d
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:92     .text.toTemp:0000000000000000 $t
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:98     .text.toTemp:0000000000000000 toTemp
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:137    .text.toTemp:0000000000000030 $d
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:146    .text.SM5852_Init:0000000000000000 $t
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:153    .text.SM5852_Init:0000000000000000 SM5852_Init
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:240    .text.SM5852_Init:0000000000000060 $d
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:249    .text.SM5852_GetData:0000000000000000 $t
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:256    .text.SM5852_GetData:0000000000000000 SM5852_GetData
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:419    .text.SM5852_GetData:00000000000000e8 $d
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:428    .text.SM5852_Manager:0000000000000000 $t
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:435    .text.SM5852_Manager:0000000000000000 SM5852_Manager
/var/folders/rk/zpr83dd14lx588t7kb0yv2b40000gn/T//ccJdHuPf.s:509    .text.SM5852_Manager:0000000000000060 $d

UNDEFINED SYMBOLS
__aeabi_i2d
__aeabi_dcmplt
__aeabi_ui2f
__aeabi_f2d
__aeabi_dsub
__aeabi_ddiv
__aeabi_d2f
Simple_Kalman_Filter
HAL_GetTick
MX_I2C1_Init
HAL_I2C_Master_Transmit
MX_I2C2_Init
hi2c1
hi2c2
HAL_I2C_Mem_Read
__aeabi_dmul
Update_Estimate
